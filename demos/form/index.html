<!DOCTYPE html>

<html>
<head>
	<script src="../../build/aui/aui.js" type="text/javascript"></script>

	<link rel="stylesheet" href="../../build/aui-skin-classic/css/aui-skin-classic-all-min.css" type="text/css" media="screen" />

	<style type="text/css" media="screen">
		body {
			font-size: 12px;
		}

		#wrapper {
			margin: 20px auto;
			width: 960px;
		}

		/* ---------- Custom form css ---------- */
		.aui-field-content {
			display: block;
			clear: both;
			border-bottom: 1px solid #dfdfdf;
			padding: 7px 0;
		}

		.aui-field-last .aui-field-content {
			display: block;
			clear: both;
			border-bottom-width: 0;
			padding: 7px 0;
		}

		.aui-field-choice .aui-field-content {
			padding: 0 0 10px;
			border-bottom-width: 0;
		}


		.aui-fieldset-legend {
			padding-bottom: 1em;
		}

		.aui-button-row {
			padding: 5px;
			background: #eee;
			border-top: 1px solid #ccc;
		}

		.aui-button-input {
			background-color: #f5f5f5;
			border: 1px solid #dedede;
			border-top-color: #eee;
			border-left-color: #eee;
			color: #565656;
		}

		.aui-button-input:hover {
			border: 1px solid #c2e1ef;
			background-color: #dff4ff;
			color: #369;
		}

		.aui-button-input:active {
			border: 1px solid #6299c5;
			background-color: #6299c5;
			color: #fff;
		}

		.aui-state-positive .aui-button-input {
			color: #529214;
		}

		.aui-state-positive .aui-button-input:hover {
			background-color: #e6efc2;
			border-color: #c6d880;
		}

		.aui-state-positive .aui-button-input:active {
			background-color: #529214;
			border-color: #529214;
			color: #fff;
		}

		.aui-state-negative .aui-button-input {
			color: #d12f19;
		}

		.aui-state-negative .aui-button-input:hover {
			background-color: #fbe3e4;
			border-color: #fbc2c4;
			color: #d12f19;
		}

		.aui-state-negative .aui-button-input:active {
			background-color: #d12f19;
			border-color: #d12f19;
			color: #fff;
		}

/*
	Container:
		aui-field,
		aui-field-(type)
		aui-field-(element-type)
			aui-field-content

	Elements:
		Label:
			aui-field-label
		Input:
			aui-field-input,
			aui-field-input-(type)
			aui-field-input-(element-type)

		Field hints:
			aui-field-hint

	States:
		aui-field-focused
		aui-field-checked
		aui-field-primary
		aui-field-secondary
		aui-field-positive
		aui-field-negative

		aui-state-error

	Types:
		text
			text
			textarea
			password
		menu
			select
			select-multiple
		choice
			checkbox
			radio
		button
			submit
			reset
			push
			image
		upload
			file
		hidden //Never styled

		<span class="aui-field aui-field-text aui-field-password">
			<span class="aui-field-content">
				<label class="aui-field-label"></label>

				Text
					<input class="aui-field-input aui-field-input-text" />
					<input class="aui-field-input aui-field-input-text aui-field-input-password" />
					<textarea class="aui-field-input aui-field-input-text aui-field-input-textarea"></textarea>

				Menu
					<select class="aui-field-input aui-field-input-menu aui-field-input-select"></select>
					<select class="aui-field-input aui-field-input-menu aui-field-input-select aui-field-input-select-multiple"></select>

				Choice
					<input class="aui-field-input aui-field-input-choice aui-field-input-checkbox" />
					<input class="aui-field-input aui-field-input-choice aui-field-input-radio" />

				Button
					<input class="aui-field-input aui-field-input-button aui-field-input-submit" />
					<input class="aui-field-input aui-field-input-button aui-field-input-reset" />
					<input class="aui-field-input aui-field-input-button aui-field-input-cancel" />
					<input class="aui-field-input aui-field-input-button aui-field-input-push" />
					<input class="aui-field-input aui-field-input-button aui-field-input-image" />
					<button class="aui-field-input aui-field-input-button aui-field-input-push"></button>

				Upload
				<input class="aui-field-input aui-field-input-upload aui-field-input-image" />

				<span class="aui-field-hint"></span>
			</span>
		</span>
*/

	</style>
</head>

<body>
<div id="wrapper">
	<h1>Alloy - form Demo</h1>

<input id="Xcheckbox2" name="Xcheckbox2" type="checkbox" value="1" /><input id="Xradio2" name="Xradio1" type="radio" value="2" /><input id="Xradio1" name="Xradio1" type="radio" value="1" />

	<div id="demo">
		<form class="aui-layout-content aui-form" id="myForm" action="">

			<div class="aui-fieldset aui-w33 aui-column aui-column-first">
				<div class="aui-fieldset-content aui-column-content aui-column-content-first">
					<div class="aui-fieldset-legend aui-widget-hd">
						Top aligned labels
					</div>

					<div class="aui-fieldset-bd aui-widget-bd">
						<span class="aui-field aui-field-text aui-field-first">
							<span class="aui-field-content">
								<label class="aui-field-label" for="textField">Text</label>
								<input class="aui-field-input aui-field-input-text" id="textField" name="textField" type="text" />
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-text</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-text aui-field-password">
							<span class="aui-field-content">
								<label class="aui-field-label" for="passwordField">Password</label>
								<input class="aui-field-input aui-field-input-text aui-field-input-password" id="passwordField" name="passwordField" type="password" />
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-text, .aui-field-password</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-menu aui-field-select">
							<span class="aui-field-content">
								<label class="aui-field-label" for="menuField">Select (Menu)</label>
								<select class="aui-field-input aui-field-input-select" id="menuField" name="menuField">
									<option selected="selected" value="1">Menu Selection 1</option>
									<option value="2">Menu Selection 2</option>
									<option value="3">Menu Selection 3</option>
								</select>
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-menu, .aui-field-select</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-menu aui-field-select aui-field-select-multiple">
							<span class="aui-field-content">
								<label class="aui-field-label" for="multipleMenuField">Select Multiple (Menu)</label>
								<select class="aui-field-input aui-field-input-select aui-field-input-select-multiple" id="multipleMenuField" name="multipleMenuField" multiple="true">
									<option selected="selected" value="1">Menu Selection 1</option>
									<option value="2">Menu Selection 2</option>
									<option value="3">Menu Selection 3</option>
								</select>
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-menu, .aui-field-select, .aui-field-select-multiple</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-text aui-field-textarea">
							<span class="aui-field-content">
								<label class="aui-field-label" for="textareaField">Textarea</label>
								<textarea class="aui-field-input aui-field-input-text aui-field-input-textarea" id="textareaField" name="textareaField"></textarea>
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-text, .aui-field-textarea</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-nested aui-field-last">
							<span class="aui-field-content">
								<span class="aui-field-label">
									Checkboxes
								</span>

								<span class="aui-field-group">
									<span class="aui-field-group-content">
										<span class="aui-field aui-field-choice aui-field-checkbox aui-field-checked">
											<span class="aui-field-content">
												<input checked="true" class="aui-field-input aui-field-input-choice aui-field-input-checkbox" id="checkbox1" name="checkbox1" type="checkbox" value="1" />

												<label class="aui-choice-label" for="checkbox1">
													Checkbox 1 (.aui-field, .aui-field-choice, .aui-field-checkbox)
												</label>
											</span>
										</span>

										<span class="aui-field aui-field-choice aui-field-checkbox">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-checkbox" id="checkbox2" name="checkbox2" type="checkbox" value="1" />
												<label class="aui-choice-label" for="checkbox2">
													Checkbox 2 (.aui-field, .aui-field-choice, .aui-field-checkbox)
												</label>
											</span>
										</span>

										<span class="aui-field aui-field-choice aui-field-checkbox">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-checkbox" id="checkbox3" name="checkbox3" type="checkbox" value="1" />
												<label class="aui-choice-label" for="checkbox3">
													Checkbox 3 (.aui-field, .aui-field-choice, .aui-field-checkbox)
												</label>
											</span>
										</span>
									</span>
								</span>

								<span class="aui-field-hint">
									.aui-field-nested, .aui-field-group
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-nested aui-field-last">
							<span class="aui-field-content">
								<span class="aui-field-label">
									Radio buttons
								</span>

								<span class="aui-field-group">
									<span class="aui-field-group-content">
										<span class="aui-field aui-field-choice aui-field-radio">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-radio" id="radio1" name="radio1" type="radio" value="1" />

												<label class="aui-choice-label"  for="radio1">
													Radio 1 (.aui-field, .aui-field-choice, .aui-field-radio)
												</label>
											</span>
										</span>

										<span class="aui-field aui-field-choice aui-field-radio">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-radio" id="radio2" name="radio1" type="radio" value="2" />

												<label class="aui-choice-label" for="radio2">
													Radio 2 (.aui-field, .aui-field-choice, .aui-field-radio)
												</label>
											</span>
										</span>

										<span class="aui-field aui-field-choice aui-field-radio">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-radio" id="radio3" name="radio1" type="radio" value="3" />

												<label class="aui-choice-label" for="radio3">
													Radio 3 (.aui-field, .aui-field-choice, .aui-field-radio)
												</label>
											</span>
										</span>
									</span>
								</span>

								<span class="aui-field-hint">
									.aui-field-nested, .aui-field-group
								</span>
							</span>
						</span>
					</div>

				</div>
			</div>
			
			<div class="aui-fieldset aui-w33 aui-column aui-field-labels-inline">
				<div class="aui-fieldset-content aui-column-content">
					<div class="aui-fieldset-legend aui-widget-hd">
						Inline labels, left aligned
					</div>

					<div class="aui-fieldset-bd aui-widget-bd">
						<span class="aui-field aui-field-text aui-field-first">
							<span class="aui-field-content">
								<label class="aui-field-label" for="textField">Text</label>
								<input class="aui-field-input aui-field-input-text" id="textField" name="textField" type="text" />
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-text</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-text aui-field-password">
							<span class="aui-field-content">
								<label class="aui-field-label" for="passwordField">Password</label>
								<input class="aui-field-input aui-field-input-text aui-field-input-password" id="passwordField" name="passwordField" type="password" />
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-text, .aui-field-password</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-menu aui-field-select">
							<span class="aui-field-content">
								<label class="aui-field-label" for="menuField">Select (Menu)</label>
								<select class="aui-field-input aui-field-input-select" id="menuField" name="menuField">
									<option selected="selected" value="1">Menu Selection 1</option>
									<option value="2">Menu Selection 2</option>
									<option value="3">Menu Selection 3</option>
								</select>
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-menu, .aui-field-select</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-menu aui-field-select aui-field-select-multiple">
							<span class="aui-field-content">
								<label class="aui-field-label" for="multipleMenuField">Select Multiple (Menu)</label>
								<select class="aui-field-input aui-field-input-select aui-field-input-select-multiple" id="multipleMenuField" name="multipleMenuField" multiple="true">
									<option selected="selected" value="1">Menu Selection 1</option>
									<option value="2">Menu Selection 2</option>
									<option value="3">Menu Selection 3</option>
								</select>
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-menu, .aui-field-select, .aui-field-select-multiple</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-text aui-field-textarea">
							<span class="aui-field-content">
								<label class="aui-field-label" for="textareaField">Textarea</label>
								<textarea class="aui-field-input aui-field-input-text aui-field-input-textarea" id="textareaField" name="textareaField"></textarea>
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-text, .aui-field-textarea</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-nested aui-field-last">
							<span class="aui-field-content">
								<span class="aui-field-label">
									Checkboxes
								</span>

								<span class="aui-field-group">
									<span class="aui-field-group-content">
										<span class="aui-field aui-field-choice aui-field-checkbox aui-field-checked">
											<span class="aui-field-content">
												<input checked="true" class="aui-field-input aui-field-input-choice aui-field-input-checkbox" id="checkbox1a" name="checkbox1a" type="checkbox" value="1" />

												<label class="aui-choice-label" for="checkbox1a">
													Checkbox 1 (.aui-field, .aui-field-choice, .aui-field-checkbox)
												</label>
											</span>
										</span>

										<span class="aui-field aui-field-choice aui-field-checkbox">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-checkbox" id="checkbox2a" name="checkbox2a" type="checkbox" value="1" />
												<label class="aui-choice-label" for="checkbox2a">
													Checkbox 2 (.aui-field, .aui-field-choice, .aui-field-checkbox)
												</label>
											</span>
										</span>

										<span class="aui-field aui-field-choice aui-field-checkbox">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-checkbox" id="checkbox3a" name="checkbox3a" type="checkbox" value="1" />
												<label class="aui-choice-label" for="checkbox3a">
													Checkbox 3 (.aui-field, .aui-field-choice, .aui-field-checkbox)
												</label>
											</span>
										</span>
									</span>
								</span>

								<span class="aui-field-hint">
									.aui-field-nested, .aui-field-group
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-nested aui-field-last">
							<span class="aui-field-content">
								<span class="aui-field-label">
									Radio buttons
								</span>

								<span class="aui-field-group">
									<span class="aui-field-group-content">
										<span class="aui-field aui-field-choice aui-field-radio">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-radio" id="radio1a" name="radio1a" type="radio" value="1" />
												<label class="aui-choice-label" for="radio1a">
													Radio 1 (.aui-field, .aui-field-choice, .aui-field-radio)
												</label>
											</span>
										</span>

										<span class="aui-field aui-field-choice aui-field-radio">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-radio" id="radio2a" name="radio1a" type="radio" value="2" />
												<label class="aui-choice-label" for="radio2a">
													Radio 2 (.aui-field, .aui-field-choice, .aui-field-radio)
												</label>
											</span>
										</span>

										<span class="aui-field aui-field-choice aui-field-radio">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-radio" id="radio3a" name="radio1a" type="radio" value="3" />
												<label class="aui-choice-label" for="radio3a">
													Radio 3 (.aui-field, .aui-field-choice, .aui-field-radio)
												</label>
											</span>
										</span>
									</span>
								</span>

								<span class="aui-field-hint">
									.aui-field-nested, .aui-field-group
								</span>
							</span>
						</span>
					</div>

				</div>
			</div>

			<div class="aui-fieldset aui-w33 aui-column aui-column-last aui-field-labels-inline aui-field-labels-right">
				<div class="aui-fieldset-content aui-column-content aui-column-content-last">
					<div class="aui-fieldset-legend aui-widget-hd">
						Inline labels, right aligned
					</div>

					<div class="aui-fieldset-bd aui-widget-bd">
						<span class="aui-field aui-field-text aui-field-first">
							<span class="aui-field-content">
								<label class="aui-field-label" for="textField">Text</label>
								<input class="aui-field-input aui-field-input-text" id="textField" name="textField" type="text" />
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-text</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-text aui-field-password">
							<span class="aui-field-content">
								<label class="aui-field-label" for="passwordField">Password</label>
								<input class="aui-field-input aui-field-input-text aui-field-input-password" id="passwordField" name="passwordField" type="password" />
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-text, .aui-field-password</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-menu aui-field-select">
							<span class="aui-field-content">
								<label class="aui-field-label" for="menuField">Select (Menu)</label>
								<select class="aui-field-input aui-field-input-select" id="menuField" name="menuField">
									<option selected="selected" value="1">Menu Selection 1</option>
									<option value="2">Menu Selection 2</option>
									<option value="3">Menu Selection 3</option>
								</select>
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-menu, .aui-field-select</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-menu aui-field-select aui-field-select-multiple">
							<span class="aui-field-content">
								<label class="aui-field-label" for="multipleMenuField">Select Multiple (Menu)</label>
								<select class="aui-field-input aui-field-input-select aui-field-input-select-multiple" id="multipleMenuField" name="multipleMenuField" multiple="true">
									<option selected="selected" value="1">Menu Selection 1</option>
									<option value="2">Menu Selection 2</option>
									<option value="3">Menu Selection 3</option>
								</select>
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-menu, .aui-field-select, .aui-field-select-multiple</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-text aui-field-textarea">
							<span class="aui-field-content">
								<label class="aui-field-label" for="textareaField">Textarea</label>
								<textarea class="aui-field-input aui-field-input-text aui-field-input-textarea" id="textareaField" name="textareaField"></textarea>
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-text, .aui-field-textarea</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-nested aui-field-last">
							<span class="aui-field-content">
								<span class="aui-field-label">
									Checkboxes
								</span>

								<span class="aui-field-group">
									<span class="aui-field-group-content">
										<span class="aui-field aui-field-choice aui-field-checkbox aui-field-checked">
											<span class="aui-field-content">
												<input checked="true" class="aui-field-input aui-field-input-choice aui-field-input-checkbox" id="checkbox1b" name="checkbox1b" type="checkbox" value="1" />
												<label class="aui-choice-label" for="checkbox1b">
													Checkbox 1 (.aui-field, .aui-field-choice, .aui-field-checkbox)
												</label>
											</span>
										</span>

										<span class="aui-field aui-field-choice aui-field-checkbox">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-checkbox" id="checkbox2b" name="checkbox2b" type="checkbox" value="1" />
												<label class="aui-choice-label" for="checkbox2b">
													Checkbox 2 (.aui-field, .aui-field-choice, .aui-field-checkbox)
												</label>
											</span>
										</span>

										<span class="aui-field aui-field-choice aui-field-checkbox">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-checkbox" id="checkbox3b" name="checkbox3b" type="checkbox" value="1" />
												<label class="aui-choice-label" for="checkbox3b">
													Checkbox 3 (.aui-field, .aui-field-choice, .aui-field-checkbox)
												</label>
											</span>
										</span>
									</span>
								</span>

								<span class="aui-field-hint">
									.aui-field-nested, .aui-field-group
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-nested aui-field-last">
							<span class="aui-field-content">
								<span class="aui-field-label">
									Radio buttons
								</span>

								<span class="aui-field-group">
									<span class="aui-field-group-content">
										<span class="aui-field aui-field-choice aui-field-radio">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-radio" id="radio1b" name="radio1b" type="radio" value="1" />
												<label class="aui-choice-label" for="radio1b">
													Radio 1 (.aui-field, .aui-field-choice, .aui-field-radio)
												</label>
											</span>
										</span>

										<span class="aui-field aui-field-choice aui-field-radio">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-radio" id="radio2b" name="radio1b" type="radio" value="2" />

												<label class="aui-choice-label" for="radio2b">
													Radio 2 (.aui-field, .aui-field-choice, .aui-field-radio)
												</label>
											</span>
										</span>

										<span class="aui-field aui-field-choice aui-field-radio">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-radio" id="radio3b" name="radio1b" type="radio" value="3" />

												<label class="aui-choice-label" for="radio3b">
													Radio 3 (.aui-field, .aui-field-choice, .aui-field-radio)
												</label>
											</span>
										</span>
									</span>
								</span>

								<span class="aui-field-hint">
									.aui-field-nested, .aui-field-group
								</span>
							</span>
						</span>
					</div>

				</div>
			</div>

			<span class="aui-button-row aui-helper-clearfix">
				<span class="aui-button aui-button-submit aui-state-positive aui-priority-primary">
					<span class="aui-button-content">
						<input class="aui-button-input aui-button-input-submit" type="submit" value="Submit" />
					</span>
				</span>

				<span class="aui-button aui-button-reset aui-priority-secondary">
					<span class="aui-button-content">
						<input class="aui-button-input aui-button-input-reset" type="reset" value="Reset" />
					</span>
				</span>

				<span class="aui-button aui-button-cancel aui-state-negative">
					<span class="aui-button-content">
						<input class="aui-button-input aui-button-input-cancel" type="button" value="Cancel" />
					</span>
				</span>
			</span>
		</form>
	</div>
</div>

<script type="text/javascript" charset="utf-8">
console.clear();
AUI().ready(
	'aui-form-base',
	'event-valuechange',
	function(A) {

/*
		A.Event.define('valueChange', {
			detach: VC._onUnsubscribe,
			on	: VC._onSubscribe,

			publishConfig: {
				emitFacade: true
			}
		});


		if ( !jQuery.support.changeBubbles ) {

			jQuery.event.special.change = {

				setup: function() {

					if ( rformElems.test( this.nodeName ) ) {
						// IE doesn't fire change on a check/radio until blur; trigger it on click
						// after a propertychange. Eat the blur-change in special.change.handle.
						// This still fires onchange a second time for check/radio after blur.
						if ( this.type === "checkbox" || this.type === "radio" ) {
							jQuery.event.add( this, "propertychange._change", function( event ) {
								if ( event.originalEvent.propertyName === "checked" ) {
									this._just_changed = true;
								}
							});
							jQuery.event.add( this, "click._change", function( event ) {
								if ( this._just_changed ) {
									this._just_changed = false;
									jQuery.event.simulate( "change", this, event, true );
								}
							});
						}
						return false;
					}
					// Delegated event; lazy-add a change handler on descendant inputs
					jQuery.event.add( this, "beforeactivate._change", function( e ) {
						var elem = e.target;

						if ( rformElems.test( elem.nodeName ) && !elem._change_attached ) {					
							jQuery.event.add( elem, "change._change", function( event ) {
								if ( this.parentNode && !event.isSimulated ) {
									jQuery.event.simulate( "change", this.parentNode, event, true );
								}
							});
							elem._change_attached = true;
						}
					});
				},

				handle: function( event ) {
					var elem = event.target;

					// Swallow native change events from checkbox/radio, we already triggered them above
					if ( this !== elem || event.isSimulated || event.isTrigger || (elem.type !== "radio" && elem.type !== "checkbox") ) {
						return event.handleObj.handler.apply( this, arguments );
					}
				},

				teardown: function() {
					jQuery.event.remove( this, "._change" );

					return rformElems.test( this.nodeName );
				}
			};
		}
		
*/

/*

	simulate: function( type, elem, event, bubble ) {
		// Piggyback on a donor event to simulate a different one.
		// Fake originalEvent to avoid donor's stopPropagation, but if the
		// simulated event prevents default then we do the same on the donor.
		var e = jQuery.extend( 
			new jQuery.Event(), 
			event, 
			{ type: type, isSimulated: true, originalEvent: {} }
		);
		if ( bubble ) {
			jQuery.event.trigger( e, null, elem );
		} else {
			jQuery.event.handle.call( elem, e );
		}
		if ( e.isDefaultPrevented() ) {
			event.preventDefault();
		}
	}

	
*/
	//////////////////////////////////////////////////////////////////////////
	if (false) {
		if ( rformElems.test( this.nodeName ) ) {
			// IE doesn't fire change on a check/radio until blur; trigger it on click
			// after a propertychange. Eat the blur-change in special.change.handle.
			// This still fires onchange a second time for check/radio after blur.
			if ( this.type === "checkbox" || this.type === "radio" ) {
				jQuery.event.add( this, "propertychange._change", function( event ) {
					if ( event.originalEvent.propertyName === "checked" ) {
						this._just_changed = true;
					}
				});
				jQuery.event.add( this, "click._change", function( event ) {
					if ( this._just_changed ) {
						this._just_changed = false;
						jQuery.event.simulate( "change", this, event, true );
					}
				});
			}
			return false;
		}
		// Delegated event; lazy-add a change handler on descendant inputs
		jQuery.event.add( this, "beforeactivate._change", function( e ) {
			var elem = e.target;

			if ( rformElems.test( elem.nodeName ) && !elem._change_attached ) {
				jQuery.event.add( elem, "change._change", function( event ) {
					if ( this.parentNode && !event.isSimulated ) {
						jQuery.event.simulate( "change", this.parentNode, event, true );
					}
				});
				elem._change_attached = true;
			}
		});
	}
	//////////////////////////////////////////////////////////////////////////
	var Y = A;
	var Event	= Y.Event,
		YLang	= Y.Lang,
		isString = YLang.isString,
		useActivate = YLang.isFunction(
			Y.DOM.create('<p onbeforeactivate=";"/>').onbeforeactivate);
// ---------

var Lang = A.Lang,
	isString = Lang.isString,
	Event = A.Event,
	LString = Lang.String,

	CONFIG_CAPTURE = {
		capture: true,
	},

	USE_ACTIVATE = Lang.isFunction(A.DOM.create('<p onbeforeactivate=";"/>').onbeforeactivate),
	REGEX_BUTTON = /^(?:input|button)$/i;

var EventSupport = function(config) {
	var instance = this;

	var directEvent = config.directEvent;
	var proxy = config.proxy;
	var type = config.type;

	var prefix = LString.prefix('_', type);

	var	MAP_CHANGED = {};

	var NODE_DATA_KEY = prefix + 'Notifiers';
	var NODE_ATTACHED_KEY = prefix + 'Attached';
	var NODE_SUB_KEY = prefix + 'SubKey';

	var eventDef = {
		delegate: function (node, sub, notifier, filter) {
			var instance = this;

			var handle;

			var el = node._node;

			if (!A.DOM.isWindow(el)) {
				if (isString(filter)) {
					sub.filter = Y.delegate.compileFilter(filter);
				}

				sub._HANDLES = [];
				sub._NODES = [];

				handle = instance._delegate(el, notifier, true);
			}
			else {
				handle = instance._directAttach(el, notifier);
			}

			sub.delegateHandle = handle;
		},

		detach: function (node, sub) {
			var instance = this;

			sub.onHandle.detach();
		},

		detachDelegate: function (node, sub) {
			var instance = this;

			sub.delegateHandle.detach();

			var handles = sub._HANDLES;
			var nodes = sub._NODES;

			var handlesLength = handles.length;
			var nodesLength = nodes.length;

			while (handlesLength--) {
				handles[handlesLength].detach();
			}

			var item;

			while (nodesLength--) {
				item = nodes[nodesLength];

				item.clearData(NODE_DATA_KEY);
				item.clearData(NODE_ATTACHED_KEY);
			}

			handles.length = 0;
			nodes.length = 0;
		},

		on: function (node, sub, notifier) {
			var instance = this;

			sub.onHandle = instance._directAttach(node._node, notifier);
		},

		_directAttach: function(el, notifier) {
			var instance = this;

			var elType = el.type;

			if (type == 'change' && (elType == 'radio' || elType == 'checkbox')) {
				var propertyChangeArgs = ['propertychange', A.rbind(instance._onPropChangeFn, instance, el), el];
				var clickArgs = ['click', A.rbind(instance._onClickFn, instance, el, notifier), el];

				var handles = [
					Event._attach(propertyChangeArgs, CONFIG_CAPTURE),
					Event._attach(clickArgs, CONFIG_CAPTURE)
				];

				handle = new Y.EventHandle(handles);
			}
			else {
				handle = Event._attach([type, notifier.fire, el, notifier]);
			}
		},

		_delegate: function (el, notifier) {
			var instance = this;

			var handle;

			var handles = [];
			var proxyType = proxy.split(' ');

			var fixedArgs = [null, instance._delegateProxyFn, el, instance, notifier];

			for (var i = 0, length = proxyType.length; i < length; i++) {
				fixedArgs[0] = proxyType[i];

				handles[i] = Event._attach(fixedArgs, CONFIG_CAPTURE);
			}

			handle = new Y.EventHandle(handles);

			return handle;
		},

		_delegateProxyFn: function (event, notifier) {
			var instance = this;

			var target = event.target;

			var node = target;

			var el = node._node;

			if (type == 'submit') {
				if (REGEX_BUTTON.test(el.nodeName)) {
					node = node.get('form');
				}
				else {
					node = null;
				}
			}

			if (node) {
				var currentTarget = event.currentTarget;

				var guid = A.stamp(currentTarget._node);

				var sub = notifier.handle.sub;

				var filterArgs = [node, event].concat(sub.args || []);

				var directSub;

				notifier.currentTarget = node;
				notifier.container = currentTarget;

				if ((!sub.filter || sub.filter.apply(node, filterArgs)) && !node.getData(NODE_ATTACHED_KEY)) {
					sub._NODES.push(node);

					var storedNotifiers = node.getData(NODE_DATA_KEY);

					if (!storedNotifiers) {
						storedNotifiers = {};

						node.setData(NODE_DATA_KEY, storedNotifiers);

						var handle;
						var elType = el.type;

						if (type == 'change' && (elType == 'radio' || elType == 'checkbox')) {
							var propertyChangeArgs = ['propertychange', A.rbind(instance._onPropChangeFn, instance, el), el];
							var clickArgs = ['click', A.rbind(instance._onClickFn, instance, el, true), el];

							notifier.handle.sub._HANDLES.push(
								Event._attach(propertyChangeArgs, CONFIG_CAPTURE),
								Event._attach(clickArgs, CONFIG_CAPTURE)
							);
						}

						handle = Event._attach([directEvent, instance._notify, node._node]);

						directSub = handle.sub;
						// directSub.once = true;

						node.setData(NODE_SUB_KEY, handle);

						notifier.handle.sub._HANDLES.push(handle);
					}

					var notifiersCollection = storedNotifiers[guid];

					if (!notifiersCollection) {
						notifiersCollection = storedNotifiers[guid] = [];
					}

					notifiersCollection.push(notifier);

					node.setData(NODE_ATTACHED_KEY, true);
				}
			}
		},

		_onClickFn: function(event, el, notifier) {
			var instance = this;

			var guid = A.stamp(el);

			if (MAP_CHANGED[guid]) {
				delete MAP_CHANGED[guid];

				instance._notify(event, null, notifier);
			}
		},

		_onPropChangeFn: function(event, el) {
			var instance = this;

			if (event._event.propertyName == 'checked') {
				MAP_CHANGED[A.stamp(el)] = true;
			}
		},

		_notify: function (event, container, keepNotifiers) {
			var instance = this;

			var node = event.currentTarget;
			var target = node._node;

			var doc = target.ownerDocument || node;

			var storedNotifiers = node.getData(NODE_DATA_KEY);

			var notifiers = [];

			var notifier = !Lang.isBoolean(keepNotifiers) && keepNotifiers;

			if (storedNotifiers) {
				var notifiersCollection;

				while (target && target !== doc) {
					notifiersCollection = storedNotifiers[A.stamp(target)];

					if (notifiersCollection) {
						notifiers.push.apply(notifiers,  notifiersCollection);
					}

					target = target.parentNode;
				}

				notifiersCollection = storedNotifiers[A.stamp(doc)];

				if (notifiersCollection) {
					notifiers.push.apply(notifiers,  notifiersCollection);
				}

				if (notifier) {
					notifier.fire(event);
				}

				for (var i = 0, length = notifiers.length; i < length; i++) {
					notifier = notifiers[i];

					event.currentTarget = notifier.currentTarget;

					if (notifier.container) {
						event.container = notifier.container;
					}

					notifier.fire(event);
				}

				if (keepNotifiers) {
					var directSub = node.getData(NODE_SUB_KEY);

					if (directSub) {
						directSub.detach();
					}
				}
				else {
					// node.clearData(NODE_DATA_KEY);
					// node.clearData(NODE_ATTACHED_KEY);
				}
			}
		}
	};

	A.Event.define(type, eventDef, true);
};

A.EventSupport = EventSupport;

function define(type, proxy, directEvent) {return;
	var nodeDataKey = '_' + type + 'Notifiers';
	var nodeAttachedKey = '_' + type + 'Attached';
	var nodeSubKey = '_' + type + 'SubKey';

	Y.Event.define(type, {

		_attach: function (el, notifier, delegate) {
			if (!delegate || Y.DOM.isWindow(el)) {
				var handle;
				if (type == 'change' && (el.type == 'radio' || el.type == 'checkbox')) {

					var instance = this;
					var i = 1;

					var ret = [
						Event._attach(['propertychange', function (e) {
							if (e._event.propertyName === 'checked') {
								// !(i % 5) ? (i = 1, console.clear()) : i++;
								// console.log(i%5);
								// console.log(e._event.propertyName, e._event.srcElement[e._event.propertyName]);
								el._just_changed = true;
							}
						}, el], { capture: true }),
						Event._attach(['click', function (e) {
							if (el._just_changed) {
								el._just_changed = false;
								instance._notify(e, null, notifier);
							}
						}, el], { capture: true })
					];
					handle = new Y.EventHandle(ret);
				}
				else {
					handle = Event._attach([type, function (e) {
						notifier.fire(e);
					}, el]);
				}
				return handle;
			} else {
				var ret = [];
				var proxyType = proxy.split(' ');
				for (var i = 0, length = proxyType.length; i < length; i++) {
					ret[i] = Event._attach(
						[proxyType[i], this._proxy, el, this, notifier, delegate],
						{ capture: true });
				}

				return new Y.EventHandle(ret);
			}
		},

		_proxy: function (e, notifier, delegate) {
			var node = e.target;
			var el = node._node;
			if (type == 'submit') {
				if ((/^(?:input|button)$/i).test(el.nodeName)) {
					node = node.get('form');
				}
				else {
					node = null;
				}
			}
			// console.log('_proxy', type, node, e.type);

			if (node) {
				var	notifiers  = node.getData(nodeDataKey),
					yuid	   = Y.stamp(e.currentTarget._node),
					defer	  = (useActivate || e.target !== e.currentTarget),
					sub		= notifier.handle.sub,
					filterArgs = [node, e].concat(sub.args || []),
					directSub;

				notifier.currentTarget = (delegate) ? node : e.currentTarget;
				notifier.container	 = (delegate) ? e.currentTarget : null;

				if ((!sub.filter || sub.filter.apply(node, filterArgs)) && !node.getData(nodeAttachedKey)) {
					// Maintain a list to handle subscriptions from nested
					// containers div#a>div#b>input #a.on(focus..) #b.on(focus..),
					// use one focus or blur subscription that fires notifiers from
					// #b then #a to emulate bubble sequence.
					if (!notifiers) {
						notifiers = {};
						node.setData(nodeDataKey, notifiers);

						// only subscribe to the element's focus if the target is
						// not the current target (
						if (defer) {
							var handle = Event._attach(
								[directEvent, this._notify, node._node]);
							directSub = handle.sub;
							// directSub.once = true;

							node.setData(nodeSubKey, handle);
						}
					}

					if (!notifiers[yuid]) {
						notifiers[yuid] = [];
					}

					notifiers[yuid].push(notifier);

					if (!defer) {
						this._notify(e);
					}

					node.setData(nodeAttachedKey, true);
				}
			}
		},

		_notify: function (e, container, keepNotifiers) {
			var node		= e.currentTarget,
				notifiers   = node.getData(nodeDataKey),
							  // document.get('ownerDocument') returns null
				doc		 = node.get('ownerDocument') || node,
				target	  = node,
				nots		= [],
				notifier = keepNotifiers, i, len;

			if (notifiers) {
				// Walk up the parent axis until the origin node, 
				while (target && target !== doc) {
					nots.push.apply(nots, notifiers[Y.stamp(target)] || []);
					target = target.get('parentNode');
				}
				nots.push.apply(nots, notifiers[Y.stamp(doc)] || []);

				if (notifier) {
					notifier.fire(e);
				}

				for (i = 0, len = nots.length; i < len; ++i) {
					notifier = nots[i];
					e.currentTarget = nots[i].currentTarget;

					if (notifier.container) {
						e.container = notifier.container;
					}

					notifier.fire(e);
				}

				if (keepNotifiers) {
					var directSub = node.getData(nodeSubKey);

					if (directSub) {
						directSub.detach();
					}
					return;
				}

				// clear the notifications list (mainly for delegation)
				// node.clearData(nodeDataKey);
				// node.clearData(nodeAttachedKey);
			}
		},

		on: function (node, sub, notifier) {
			sub.onHandle = this._attach(node._node, notifier);
		},

		detach: function (node, sub) {
			sub.onHandle.detach();
		},

		delegate: function (node, sub, notifier, filter) {
			if (isString(filter)) {
				sub.filter = Y.delegate.compileFilter(filter);
			}

			sub.delegateHandle = this._attach(node._node, notifier, true);
		},

		detachDelegate: function (node, sub) {
			sub.delegateHandle.detach();
		}
	}, true);
}

// For IE, we need to defer to focusin rather than focus because
// `el.focus(); doSomething();` executes el.onbeforeactivate, el.onactivate,
// el.onfocusin, doSomething, then el.onfocus.  All others support capture
// phase focus, which executes before doSomething.  To guarantee consistent
// behavior for this use case, IE's direct subscriptions are made against
// focusin so subscribers will be notified before js following el.focus() is
// executed.
if (USE_ACTIVATE) {
	//	 name	 capture phase	   direct subscription
	// define("change", "beforeactivate",   "change");
	// define("submit", "click keypress",   "submit");
	A.EventSupport(
		{
			type: 'change',
			proxy: 'beforeactivate',
			directEvent: 'change'
		}
	);
	A.EventSupport(
		{
			type: 'submit',
			proxy: 'click keypress',
			directEvent: 'submit'
		}
	);
	// define("blur",  "beforedeactivate", "focusout");
} else {
	// define("change", "change", "change");
	// define("blur",  "blur",  "blur");
}

		A.getBody().delegate(
			'change',
			function(event) {
				console.log('THIS WAS A DELEGATED CHANGE', event.currentTarget.val(), '---', String(A.Lang.now()).slice(-4));
			},
			'input,textarea,select'
		);
		A.getBody().delegate(
			'change',
			function(event) {
				console.log('--2 this was a delegated change', event.currentTarget.val(), '---', String(A.Lang.now()).slice(-4));
			},
			'input,textarea,select'
		);
		// 
		// A.getBody().delegate(
		// 	'click',
		// 	function(event) {
		// 		console.log('1 hello');
		// 	},
		// 	'.aui-field-label'
		// );
		// 
		// A.getBody().delegate(
		// 	'click',
		// 	function(event) {
		// 		console.log('2 hello');
		// 	},
		// 	'.aui-field-label'
		// );

		A.getBody().delegate(
			'click',
			function(event) {
				console.log('valid H1 delegate click');

				A.getBody().detach('change');
				A.getBody().delegate('change', function(event) {
					console.log('delegated event');
				}, ':input');
			},
			'h1'
		);
		// 
		// A.all(':input').on('change', function(event) {
		// 	console.log('no del ', event.currentTarget.val(), '---', String(A.Lang.now()).slice(-4));
		// })

		A.getBody().delegate('submit', function(event) {
			console.log('--delegated SUBMIT--');
		}, 'form');

		A.one('form').on('submit', function(event) {
			event.preventDefault();
			console.log('!regular submit!');
		});
return;
		var form = new A.Form(
			{
				contentBox: '#myForm'
			}
		);

		form.render();

		formWidget = form;

		return;
/*
		for (var i = 1; i <= 6; i++) {
			var field = new A.Field(
				{
					node: '#username' + i,
					labelText: 'label ' + i,
					type: 'password'
				}
			)
			.render();

			form.add(field);
		}
*/

		window.myField = new A.Textfield(
			{
				labelText: 'label 7',
				value: 'orgiinal',
				name: 'fieldX',
				fieldHint: 'Please enter your username',
				labelAlign: 'left'
			}
		)
		.render('.aui-fieldset-bd');

		myField.get('boundingBox').prependTo('.aui-fieldset-bd');

		form.add(myField);

		window.myForm = form;

		if(1){
		taBox = A.one('.aui-field-textarea')
		taCBox = taBox.one('.aui-field-content')

		ta = new A.Textarea({
		// boundingBox: taBox,
		// contentBox: taCBox,
		autoSize: true,
		maxHeight: 250
		}).render();

		}
		ta.get('node').getComputedStyle('width')

		new A.Combobox(
			{
				labelText: 'Combo Field'
			}
		).render();
	}
);

</script>

</body>
</html>