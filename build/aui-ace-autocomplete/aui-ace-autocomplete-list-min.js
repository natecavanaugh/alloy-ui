AUI.add("aui-ace-autocomplete-list",function(k){var S=k.Lang,o=k.Array,B=k.Node,y=k.Do,e=k.getClassName,O="data-index",z="ace-autocomplete-list",b="container",q=".",c="empty",i="",C="entry",u="highlighted",G="list",p="loading",E="offsetHeight",D="previous",v="region",P="results",w="selected",a=" ",R="visible",j="ace-autocomplete",g=e(j,C),L=e(j,C,b),t=e(j,C,b,u),n=e(j,C,c),N=e(j,C,p),F=e(j,C,p),d=e(j,P),K=q+L,l=K+q+w,Q=l+a+q+g,s="<div></div>",m=40,h=35,M=34,r=33,f=36,I=38,H=5,J=20;var x=k.Component.create({NAME:z,NS:z,ATTRS:{emptyMessage:{validator:S.isString,value:"No suggestions"},host:{validator:S.isObject},listNode:{value:null},loadingMessage:{validator:S.isString,value:"Loading"},results:{validator:S.isArray},selectedEntry:{getter:"_getSelectedEntry"}},AUGMENTS:[k.AceEditor.AutoCompleteBase,k.WidgetAutohide],CSS_PREFIX:j,EXTENDS:k.OverlayBase,HTML_PARSER:{listNode:q+d},prototype:{bindUI:function(){var A=this;A.on("addSuggestion",A.hide,A);A.on("cursorChange",A._onCursorChange,A);A.on("cursorOut",A.hide,A);A.on("insertText",A._onInsertText,A);A.on("match",A._onMatch,A);A.on("removeText",A._onRemoveText,A);A.on("resultsChange",A._onResultsChange,A);A.on("resultsError",A._setEmptyResults,A);A.on("showLoadingMessage",A._onShowLoadingMessage,A);A.on("visibleChange",A._onVisibleChange,A);},renderUI:function(){var A=this;var T=A.get("listNode");if(!T){T=A._createListNode();}T.delegate("click",A._handleResultListClick,K,A);T.delegate("mouseenter",A._onMouseEnter,K,A);T.delegate("mouseleave",A._onMouseLeave,K);A._autoCompleteResultsList=T;},_createListNode:function(){var A=this;var T=k.Node.create(A.TPL_LIST);A.get("contentBox").append(T);return T;},_getEntriesPerPage:function(){var A=this;var U=A._entriesPerPage;if(!U){var T=A._autoCompleteResultsList;var V=T.one(K).get(E);var W=T.get(E);U=Math.floor(W/V);A._entriesPerPage=U;}return U;},_getSelectedEntry:function(){var A=this;var T;var U=A._autoCompleteResultsList.one(Q);if(U){T=U.text();}return T;},_handleArrows:function(Y){var A=this;var X;if(Y===I){X=D;}else{if(Y===m){X="next";}}if(X){var V=A._autoCompleteResultsList;var U=V.one(l);if(U){var W=U[X](K);if(W){U.removeClass(w);W.addClass(w);var Z=V.get(v);var T=W.get(v);if(X===D){if(T.top<Z.top){W.scrollIntoView(true);}else{if(T.top>Z.bottom){W.scrollIntoView();}}}else{if(T.top+T.height>Z.bottom){W.scrollIntoView();}else{if(T.top+T.height<Z.top){W.scrollIntoView(true);}}}}}return new y.Halt(null);}},_handleKey:function(U,W,V){var T=this;var A;if(T.get(R)){if(V===I||V===m){A=T._handleArrows(V);}else{if(V===r||V===M){A=T._handlePageUpDown(V);}else{if(V===h||V===f){A=T._handleStartEnd(V);}}}}return A;},_handlePageUpDown:function(aa){var Y=this;var V=Y._autoCompleteResultsList;var Z=Y._getEntriesPerPage();var X=V.one(l);var A=S.toInt(X.attr(O));var W;var ab=i;var T=false;if(aa===r){W=A-Z;T=true;}else{if(aa===M){W=A+Z;ab=":last-child";}}var U=V.one(K+"["+O+'="'+W+'"]');if(!U){U=V.one(K+ab);}if(X!==U){X.removeClass(w);U.addClass(w);U.scrollIntoView(T);}return new y.Halt(null);},_handleResultListClick:function(V){var A=this;var W=V.currentTarget;var T=A._autoCompleteResultsList.one(l);if(W!==T){T.removeClass(w);W.addClass(w);}var U=W.text();A._addSuggestion(U);A.fire("entrySelected",{content:U});},_handleStartEnd:function(X){var A=this;var V;var W=false;var U=A._autoCompleteResultsList;if(X===h){V=U.one(K+":last-child");}else{if(X===f){V=U.one(K);W=true;}}var T=U.one(l);if(V!==T){T.removeClass(w);V.addClass(w);V.scrollIntoView(W);}return new y.Halt(null);},_onCursorChange:function(T){var A=this;if(!A.get(R)){T.preventDefault();}},_onInsertText:function(T){var A=this;if(T.startRow!==T.endRow&&A.get(R)){A.hide();}},_onMatch:function(T){var A=this;var V=A.get(R);var W=A._autoCompleteResultsList.hasChildNodes();if(T.match){if(W){if(!V){var U=T.coords;A.set("xy",[U.pageX+H,U.pageY+J]);A.show();}}else{if(V){A.hide();}}}else{if(V){A.hide();}}},_onMouseEnter:function(A){A.currentTarget.addClass(t);},_onMouseLeave:function(A){A.currentTarget.removeClass(t);},_onRemoveText:function(T){var A=this;if(A.get(R)){A.hide();}},_onResultsChange:function(Y){var A=this;var T=A._autoCompleteResultsList;T.empty();var V=Y.newVal;var X=A.TPL_ENTRY;var W=B.create(s);o.each(V,function(aa,Z){W.appendChild(S.sub(X,{index:Z,value:aa}));});T.setHTML(W.getHTML());var U=T.one(K);if(U){U.addClass(w);}},_onShowLoadingMessage:function(U){var A=this;var T=A._autoCompleteResultsList;T.empty();T.appendChild(S.sub(A.TPL_LOADING,{label:A.get("loadingMessage")}));if(!A.get(R)){A.show();}},_onVisibleChange:function(T){var A=this;if(T.newVal){A._overwriteCommands();}else{A._removeAutoCompleteCommands();}},_setEmptyResults:function(){var A=this;A.set("results",[]);},TPL_ENTRY:'<li class="'+L+'" data-index="{index}">'+'<span class="'+g+'">{value}</span>'+"</li>",TPL_LIST:'<ul class="'+d+'"/>',TPL_LOADING:'<li class="'+L+'">'+'<span class="aui-icon-loading '+N+'">{label}</span>'+"</li>",TPL_RESULTS_EMPTY:'<li class="'+L+'">'+'<span class="'+n+'">{label}</span>'+"</li>"}});k.AceEditor.AutoCompleteList=x;k.AceEditor.AutoComplete=x;},"@VERSION@",{requires:["aui-overlay-base","widget-autohide","aui-ace-autocomplete-base"],skinnable:true});