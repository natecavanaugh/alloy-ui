AUI.add("aui-ace-autocomplete-templateprocessor",function(d){var i=d.Lang,c=d.Array,l=d.Object,h=d.AceEditor.AutoCompleteBase,a=0,f=1,b=1,e=-1,g=0,k=".",m="host",j="",o="aui-ace-autocomplete-templateprocessor";var n=d.Component.create({NAME:o,NS:o,ATTRS:{directives:{validator:i.isArray},host:{validator:i.isObject},variables:{validator:i.isObject}},EXTENDS:d.Base,prototype:{getResults:function(q,v,u){var w=this;var t=q.type;if(t===a){var s=w.get("directives");var r=q.content.toLowerCase();if(r.length){var x=w.get(m);s=x._filterResults(r,s);}v(s);}else{if(t===f){var p=w._getVariableMatches(q.content);v(p);}}},getSuggestion:function(t,u){var q=this;var p=u||j;if(u){var s=q.get(m).get("fillMode");var v=t.type;var w;var r;if(s===h.FILL_MODE_INSERT){if(v===a){if(t.content&&u.indexOf(t.content)===0){p=u.substring(t.content.length);}}else{if(v===f){w=t.content.split(k);r=w[w.length-1];if(r&&u.indexOf(r)===0){p=u.substring(r.length);}}}}else{if(v===f){w=t.content.split(k);w[w.length-1]=u;p=w.join(k);}}}return p;},_isLastToken:function(p,q){return p===q.length-1;},_getTokenType:function(p){var q=e;if(i.isString(p)){if(p.length){q=g;}else{q=b;}}return q;},_getVariableMatches:function(z){var E=this;var x=[];var w=E.get("variables");var t={};var q=w.variables;var C;if(z){var B=z.split(k);C=B[B.length-1];for(var v=0;v<B.length;v++){var s=B[v];var D=E._getTokenType(s);if(D===b){if(v===0){q={};}else{t=q;}}else{if(D===g){var r=E._isLastToken(v,B);if(r){t=q;break;}var A=s.indexOf("(");if(A!==-1){s=s.substring(0,A);}var p=q[s];if(p){var u;if(v===0){u=p.type;}else{u=p.returnType;}q=w.types[u]||{};}else{if(r){t=q;break;}else{t={};break;}}}}}}else{t=w.variables;}x=l.keys(t);var y=x.sort();if(C){var F=E.get(m);y=F._filterResults(C,y);}if(y.length){y=c.map(y,function(I,H){var J=t[I];if(J.type==="Method"){var G=c.map(J.argumentTypes,function(L,K){var M=L.split(".");return M[M.length-1];});return I+"("+G.join(", ")+")";}else{return I;}});}return y;},_setRegexValue:function(q){var p=d.AttributeCore.INVALID_VALUE;if(i.isString(q)){p=new RegExp(q);}else{if(q instanceof RegExp){p=q;}}return p;}}});d.AceEditor.TemplateProcessor=n;},"@VERSION@",{requires:["aui-ace-autocomplete-base"]});