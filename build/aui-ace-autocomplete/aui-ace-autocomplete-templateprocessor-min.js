AUI.add("aui-ace-autocomplete-templateprocessor",function(c){var f=c.Lang,b=c.Array,i=c.Object,e=c.AceEditor.AutoCompleteBase,a=0,d=1,h=".",j="host",g="",l="aui-ace-autocomplete-templateprocessor";var k=c.Component.create({NAME:l,NS:l,ATTRS:{directives:{validator:f.isArray},host:{validator:f.isObject},variables:{validator:f.isObject}},EXTENDS:c.Base,prototype:{getResults:function(n,s,r){var t=this;var q=n.type;if(q===a){var p=t.get("directives");var o=n.content.toLowerCase();if(o.length){var u=t.get(j);p=u._filterResults(o,p);}s(p);}else{if(q===d){var m=t._getVariableMatches(n.content);s(m);}}},getSuggestion:function(q,r){var n=this;var m=r||g;if(r){var p=n.get(j).get("fillMode");var s=q.type;var t;var o;if(p===e.FILL_MODE_INSERT){if(s===a){if(q.content&&r.indexOf(q.content)===0){m=r.substring(q.content.length);}}else{if(s===d){t=q.content.split(h);o=t[t.length-1];if(o&&r.indexOf(o)===0){m=r.substring(o.length);}}}}else{if(s===d){t=q.content.split(h);t[t.length-1]=r;m=t.join(h);}}}return m;},_getVariableMatches:function(v){var y=this;var s=[];var o={};var r;var C=y.get("variables");var t=v.split(h);if(t.length){var B=t.length-1;r=t[t.length-1];var u=t[0];var D=C.variables[u];if(D){var n=D.type;var p=C.types[n];for(var w=1;p&&w<t.length;w++){u=t[w];if(w<B){var x=u.indexOf("(");if(x!==-1){u=u.substring(0,x);}}var A=p[u];if(A){var z=A.returnType;p=C.types[z];}else{break;}}if(p){o=p;}}else{o=C.variables;}}else{o=C.variables;}s=i.keys(o);var m=s.sort();if(r){var q=y.get(j);m=q._filterResults(r,m);}if(m.length){m=b.map(m,function(G,F){var H=o[G];if(H.type==="Method"){var E=b.map(H.argumentTypes,function(J,I){var K=J.split(".");return K[K.length-1];});return G+"("+E.join(", ")+")";}else{return G;}});}return m;},_setRegexValue:function(n){var m=c.AttributeCore.INVALID_VALUE;if(f.isString(n)){m=new RegExp(n);}else{if(n instanceof RegExp){m=n;}}return m;}}});c.AceEditor.TemplateProcessor=k;},"@VERSION@",{requires:["aui-ace-autocomplete-base"]});