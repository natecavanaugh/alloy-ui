AUI.add("aui-ace-autocomplete-freemarker",function(l){var d=l.Lang,s=l.Array,p=l.Object,h=["assign","attempt","break","case","compress","default","else","elseif","escape","fallback","flush","ftl","function","global","if","import","include","list","local","lt","macro","nested","noescape","nt","recover","recurse","return","rt","setting","stop","switch","t","visit"],i=l.AceEditor.AutoCompleteBase,a=0,e=1,t=/<#[\w.]*>?$/,k=/\$\{[\w., ()"]*\}?$/,b=-1,q=0,c="all",n=".",r="host",m="",f="responseData",j="variables",g="aui-ace-autocomplete-freemarker";var o=l.Component.create({NAME:g,NS:g,ATTRS:{host:{validator:d.isObject},variables:{validator:d.isObject}},EXTENDS:l.Base,prototype:{getMatch:function(x){var v=this;var w;var u;if((u=x.lastIndexOf("<"))>=0){x=x.substring(u);if(t.test(x)){w={content:x.substring(2),start:u,type:a};}}else{if((u=x.lastIndexOf("$"))>=0){x=x.substring(u);if(k.test(x)){w={content:x.substring(2),start:u,type:e};}}}return w;},getResults:function(v,A,z){var B=this;var y=v.type;if(y===a){var x=h;var w=v.content.toLowerCase();if(w.length){var C=B.get(r);x=C._filterResults(w,x);}A(x);}else{if(y===e){var u=B._getVariableMatches(v.content);A(u);}}},getSuggestion:function(y,z){var v=this;var u=z||m;if(z){var x=v.get(r).get("fillMode");var A=y.type;var B;var w;if(x===i.FILL_MODE_INSERT){if(A===a){if(y.content&&z.indexOf(y.content)===0){u=z.substring(y.content.length);}}else{if(A===e){B=y.content.split(n);w=B[B.length-1];if(w&&z.indexOf(w)===0){u=z.substring(w.length);}}}}else{if(A===e){B=y.content.split(n);B[B.length-1]=z;u=B.join(n);}}}return u;},_getVariableMatches:function(y){var A=this;var B=y.split(n);var u=A.get(j);var z=B[B.length-1];B.length-=1;var v;if(B.length>0){for(var w=0;w<B.length;w++){v=B[w];if(d.isObject(u)){u=u[v];}}}var x=[];z=z.toLowerCase();if(d.isObject(u)){var C=A.get(r);x=C._filterResults(z,p.keys(u));}return x;}}});o.DIRECTIVES=h;l.AceEditor.AutoCompleteFreemarker=o;},"@VERSION@",{requires:["aui-ace-autocomplete-base"]});