AUI.add("aui-media-viewer-plugin",function(b){var g=b.Lang,h=b.Do,e="body",n="href",m="image",j="loading",o="providers",l="mediaViewerPlugin",d="px";var f=function(q){var p=this;f.superclass.constructor.apply(p,arguments);};f.DATA_OPTIONS="data-options";f.DEFAULT_OPTIONS={height:360,width:640,wmode:"embed"};f.REGEX_DOMAIN="https?://(?:www\\.)?{domain}";f.REGEX_PARAM="(?:[\\?&]|^){param}=([^&#]*)";var c=f.DATA_OPTIONS;var a=f.DEFAULT_OPTIONS;var i=f.REGEX_DOMAIN;var k=f.REGEX_PARAM;f.NAME=l;f.NS="media";f.ATTRS={providers:{validator:g.isObject,value:{"flash":{container:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{media}" /><embed src="{media}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',matcher:/\b.swf\b/i,options:a,mediaRegex:/([^?&#]+)/},"youtube":{container:'<iframe width="{width}" height="{height}" src="http://www.youtube.com/embed/{media}" frameborder="0" allowfullscreen></iframe>',matcher:new RegExp(b.substitute(i,{domain:"youtube.com"}),"i"),options:a,mediaRegex:/[\?&]v=([^&#]*)/i},"vimeo":{container:'<iframe src="http://player.vimeo.com/video/{media}?title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff" width="{width}" height="{height}" frameborder="0"></iframe>',matcher:new RegExp(b.substitute(i,{domain:"vimeo.com"}),"i"),options:a,mediaRegex:/\/(\d+)/}}}};b.extend(f,b.Plugin.Base,{initializer:function(q){var p=this;var r=p._handles;r["loadMedia"]=p.beforeHostMethod("loadImage",p.loadMedia);r["preloadImage"]=p.beforeHostMethod("preloadImage",p.preloadImage);},loadMedia:function(s){var v=this;var w=v.get("host");var x=v._getMediaType(s);var z=true;if(x!=m){var t=v.get(o)[x];var p=w.getCurrentLink();var y=v._updateOptions(p,b.clone(t.options));var r=t.mediaRegex.exec(s);if(r){y.media=r[1];}var q=b.substitute(t.container,y);w.setStdModContent(e,q);w._syncImageViewerUI();v._uiSetContainerSize(y.width,y.height);w._setAlignCenter(true);w.set(j,false);v.fire("load",{media:r});if(w.get("preloadNeighborImages")){var u=w.get("currentIndex");w.preloadImage(u+1);w.preloadImage(u-1);}z=new h.Prevent();}return z;},preloadImage:function(s){var q=this;var u=q.get("host");var t=u.getLink(s);var p=new h.Prevent();if(t){var v=t.attr(n);var r=q._getMediaType(v);if(r==m){p=true;}}return p;},_getMediaType:function(s){var p=this;var r=p.get(o);var q=m;b.some(r,function(u,t,v){return u.matcher.test(s)&&(q=t);});return q;},_uiSetContainerSize:function(s,q){var p=this;var t=p.get("host");var r=t.bodyNode;r.setStyles({height:q+d,width:s+d});},_updateOptions:function(q,p){var s=q.attr(c);var r=q.attr(n);b.each(p,function(w,v,x){var u=new RegExp(b.substitute(k,{param:v}));var t=u.exec(s)||u.exec(r);if(t){p[v]=t[1];}});return p;},_handles:{}});b.MediaViewerPlugin=f;b.MediaViewer=b.ImageViewer;},"@VERSION@",{skinnable:false,requires:["aui-image-viewer-base"]});