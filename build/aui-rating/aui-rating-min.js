AUI.add("aui-rating",function(y){var s=y.Lang,P=s.isBoolean,ak=s.isNumber,t=s.isString,F=function(A){return(A instanceof y.NodeList);},r=function(A){return(A instanceof y.Node);},R="a",ag="boundingBox",S="canReset",h="clearfix",J="contentBox",O="defaultSelected",N="disabled",G=".",W="element",l="elements",Y="helper",B="hover",Z="href",i="javascript:;",H="id",o="input",ab="inputName",ai="label",am="labelNode",Q="name",aa="nodeName",v="off",C="on",z="rating",b="selectedIndex",j="showTitle",I="size",x="",T="title",ae="value",a="itemClick",c="itemOut",X="itemOver",al="itemSelect",n=y.getClassName,M=n(Y,h),g=n(z,W),U=n(z,W,B),k=n(z,W,v),E=n(z,W,C),aj=n(z,ai,W),p='<div class="'+aj+'"></div>',f={tagName:"a",attrs:x},e={tagName:"a",attrs:' href="'+i+'"'},w='<a href="'+i+'"></a>',q="<span></span>",d=' class="'+g+'"',V=function(L){var an=L?e:f;var A=["<",an.tagName,an.attrs,d,">","</",an.tagName,">"];return A.join(x);};var u=y.Component.create({NAME:"rating",ATTRS:{disabled:{value:false,validator:P},canReset:{value:true,validator:P},defaultSelected:{value:0,writeOnce:true,validator:ak},elements:{validator:F},hiddenInput:{validator:r},inputName:{value:x,validator:t},label:{value:x,validator:t},labelNode:{valueFn:function(){return y.Node.create(p);},validator:r},selectedIndex:{value:-1,validator:ak},showTitle:{value:true,validator:P},size:{value:5,validator:function(A){return ak(A)&&(A>0);}},title:null,value:null},HTML_PARSER:{elements:function(A){return A.all(G+g);},label:function(L){var A=L.one(G+aj);if(A){return A.html();}},labelNode:G+aj},prototype:{initializer:function(){var A=this;A.inputElementsData={};A.after("labelChange",this._afterSetLabel);},renderUI:function(){var A=this;var L=A.get(J);L.addClass(M);A._parseInputElements();A._renderLabel();A._renderElements();},bindUI:function(){var A=this;A._createEvents();A.on("click",A._handleClickEvent);A.on("mouseover",A._handleMouseOverEvent);A.on("mouseout",A._handleMouseOutEvent);},syncUI:function(){var A=this;A._syncElements();A._syncLabelUI();},clearSelection:function(){var A=this;A.get(l).each(function(L){L.removeClass(E);L.removeClass(U);});},select:function(ao){var au=this;var ap=au.get(b);var ar=au.get(S);if(ar&&(ap==ao)){ao=-1;}au.set(b,ao);var L=au.get(b);var an=au._getInputData(L);var aq=(T in an)?an.title:x;var at=(ae in an)?an.value:L;au.fillTo(L);au.set(T,aq);au.set(ae,at);var A=au.get("hiddenInput");A.setAttribute(T,aq);A.setAttribute(ae,at);},fillTo:function(L,an){var A=this;A.clearSelection();if(L>=0){A.get(l).some(function(ap,ao){ap.addClass(an||E);return(ao==Math.floor(L));});}},indexOf:function(L){var A=this;return A.get(l).indexOf(L);},_canFireCustomEvent:function(L){var A=this;var an=L.domEvent.target;return !A.get(N)&&an.hasClass(g);},_createElements:function(){var L=this;var aq=[];var A=V(L.get(N));for(var ao=0,an=this.get(I);ao<an;ao++){aq.push(A);}var ap=y.DOM.create(aq.join(x));return new y.NodeList(ap.childNodes);},_createEvents:function(){var A=this;var L=function(an,ao){A.publish(an,{defaultFn:ao,queuable:false,emitFacade:true,bubbles:true});};L(a,this._defRatingItemClickFn);L(al,this._defRatingItemSelectFn);L(X,this._defRatingItemOverFn);L(c,this._defRatingItemOutFn);},_defRatingItemClickFn:function(an){var A=this;var L=an.domEvent;A.fire(al,{delegateEvent:an,domEvent:L,ratingItem:L.target});},_defRatingItemSelectFn:function(L){var A=this;var an=L.domEvent.target;A.select(A.indexOf(an));},_defRatingItemOutFn:function(L){var A=this;A.fillTo(A.get(b));},_defRatingItemOverFn:function(an){var A=this;var L=A.indexOf(an.domEvent.target);A.fillTo(L,U);},_parseInputElements:function(){var A=this;var ao=A.get(ag);var L=ao.all(o);var ap=L.size();var an=A.get(ab);var aq=y.Node.create('<input type="hidden" />');if(ap>0){an=an||L.item(0).getAttribute(Q);A.set(I,ap);var ar=ao.getElementsByTagName("label");L.each(function(aw,av){var ax=aw.get(H);var au=x;if(ax){var at=ar.filter('[for="'+ax+'"]');if(at.size()){au=at.item(0).html();}}A.inputElementsData[av]={content:au,value:aw.getAttribute(ae)||av,title:aw.getAttribute(T)};});ar.remove(true);L.remove(true);}if(an){aq.setAttribute(Q,an);ao.appendChild(aq);}A.set("hiddenInput",aq);},_renderLabel:function(){var A=this;A.get(J).append(A.get(am));},_renderElements:function(){var A=this;var L=A.get(J);var an=A.get(l);if(!an||!an.size()){an=A._createElements();A.set(l,an);}an.each(function(ap,ao){var ar=A._getInputData(ao);var aq=ar.content;var at=ar.title||A.get(T)||aq;if(aq||at){ap.html(aq||at);}if(at&&A.get(j)){ap.setAttribute(T,at);}if(!ap.attr(Z)&&(ap.get(aa).toLowerCase()==R)){ap.setAttribute(Z,i);}});L.append(an.getDOM());},_syncElements:function(){var L=this;var A=L.get(O)-1;L.set(b,A);L.select();},_syncLabelUI:function(){var A=this;var L=A.get(ai);A.get(am).html(L);},_getInputData:function(L){var A=this;return A.inputElementsData[L]||{};},_handleClickEvent:function(L){var A=this;if(A._canFireCustomEvent(L)){A.fire(a,{delegateEvent:L,domEvent:L.domEvent});}},_handleMouseOutEvent:function(L){var A=this;if(A._canFireCustomEvent(L)){A.fire(c,{delegateEvent:L,domEvent:L.domEvent});}},_handleMouseOverEvent:function(L){var A=this;if(A._canFireCustomEvent(L)){A.fire(X,{delegateEvent:L,domEvent:L.domEvent});}},_afterSetLabel:function(A){this._syncLabelUI();}}});var K="down",af="thumb",ah="ThumbRating",D="up",ad=n(z,af,K),ac=n(z,af,D);var m=y.Component.create({NAME:ah,ATTRS:{size:{value:2,readOnly:true}},EXTENDS:u,prototype:{renderUI:function(){var A=this;m.superclass.renderUI.apply(this,arguments);var L=A.get(l);L.addClass(k);L.item(0).addClass(ac);L.item(1).addClass(ad);},fillTo:function(A,L){this.clearSelection();if(A>=0){this.get(l).item(A).addClass(L||E);}},_syncElements:function(){}}});y.Rating=u;y.StarRating=u;y.ThumbRating=m;},"@VERSION@",{skinnable:true,requires:["aui-base"]});